name: 华住会签到

on:
  workflow_dispatch: # 允许手动触发
  schedule:
    # 每天北京时间 00:10 运行 (对应 UTC 时间为前一天的 16:10)
    - cron: '10 16 * * *'

jobs:
  checkin:
    runs-on: ubuntu-latest
    steps:
      - name: 检出代码
        uses: actions/checkout@v3

      - name: 设置 Node.js 环境
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: 安装脚本依赖
        run: |
          npm install axios axios-cookiejar-support tough-cookie form-data sync-request

      - name: 运行签到脚本
        env:
          # --- 必填 Secret ---
          hzh_url: ${{ secrets.HZH_URL }}
        run: |
          node scripts/hzh.js
